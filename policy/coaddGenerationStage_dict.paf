#<?cfg paf dictionary ?>

target: lsst.coadd.pipeline.CoaddGenerationStage

definitions: {
    inputKeys: {
        description: "Names of input items on the clipboard."
        type: "policy"
        dictionary: {
            definitions: {
                event: {
                    type: "string"
                    description: "An event (dafBase.PropertySet). Required fields:
                        * isLastExposure a boolean. If True then the stage will add the exposure to the coadd,
                            output the coadd and reset itself.
                            The next exposure, if any, will start a new coadd."
                    minOccurs: 1
                    maxOccurs: 1
                    default: "coaddGenerationEvent"
                }        
                psfMatchedExposure: {
                    description: "Calibrated, background-subtracted, psf-matched exposure
                        (afwImage.Exposure<x>)."
                    type: "string"
                    minOccurs: 1
                    maxOccurs: 1
                    default: "psfMatchedExposure"
                }        
            }
        }
        minOccurs: 1
        maxOccurs: 1
    }
    
    #output clipboard keys:
    outputKeys: {
        description: "Names if output items on the clipboard."
        type: "policy"
        dictionary: {
            definitions: {
                coadd: {
                    description: "Coadd (afwImage.Exposure<x>).
                        Only output if the event's isLastExposure is True."
                    type: "string"
                    minOccurs: 1
                    maxOccurs: 1
                    default: "coadd"
                }        
                weightMap: {
                    description: "Coadd weight map (afwImage.ImageF).
                        Only output if the event's isLastExposure is True."
                    type: "string"
                    minOccurs: 1
                    maxOccurs: 1
                    default: "weightMap"
                }
                weight: {
                    description: "Weight of exposure (1/mean variance) (double)."
                    type: "string"
                    minOccurs: 1
                    maxOccurs: 1
                    default: "weight"
                }
            }
        }
        maxOccurs: 1
    }
    
    allowedMaskPlanes: {
        description: "Mask planes to allow (ignore) when rejecting masked pixels.
            Specify as a space-separated list of mask plane names.
            See Mask.cc in afwImage for a list of default names."
        type: "string"
        minOccurs: 1
        maxOccurs: 1
        default: "BAD SAT INTRP"
    }        
}
